<!-- views/login.ejs -->
<!doctype html>
<html>
<head>
    <title>Node Authentication</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css"> <!-- load bootstrap css -->
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css"> <!-- load fontawesome -->
    <style>
        body        { padding-top:80px; }
    </style>
</head>
<body>
<div class="container">

<div class="col-sm-6 col-sm-offset-3">

    <h1><span class="fa fa-sign-in"></span> Login</h1>

    <!-- show any messages that come back with authentication -->
    <% if (message.length > 0) { %>
        <div class="alert alert-danger"><%= message %></div>
    <% } %>

    <!-- LOGIN FORM -->
    <form name="loginForm" action="/login" onsubmit="return myFunction()" method="post">
        <div class="form-group">
            <label>Username</label>
            <input id="textemail" type="text" class="form-control" name="email">
        </div>
        <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-control" name="password">
        </div>

        <button type="submit" class="btn btn-warning btn-lg">Login</button>

        <p id="demo" style="color: red;"></p>
    </form>

    <script>
            function myFunction() {
                var email;
        
                email = document.forms["loginForm"]["textemail"].value;
        
                    var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;
        
                    if (reg.test(email) == true) 
                    {
                    document.getElementById("demo").style.color = "red";
                        document.getElementById("demo").innerHTML ="Invalid Username -> "+ email;
                        alert('You must not enter a username in email format -> ' +email);
                        return false;
                    } else{
                    document.getElementById("demo").style.color = "DarkGreen";      
                    document.getElementById("demo").innerHTML ="Valid Username ->"+email;
                    }
        
               return true;
            }
            </script>

    <hr>

    <p>Need an account? <a href="/signup">Signup</a></p>
    <p>Or go <a href="/">home</a>.</p>

</div>

</div>
</body>
</html>